@model beer_timer.Models.BeerTimer;
@{
    ViewData["Title"] = "Timer";
}

<script>
    window.onload = function () {

        var seconds = 00;
        var tens = 00;
        var appendTens = document.getElementById("tens")
        var appendSeconds = document.getElementById("seconds")
        var buttonStart = document.getElementById('button-start');
        var buttonStop = document.getElementById('button-stop');
        var buttonReset = document.getElementById('button-reset');
        var Interval;
        var wynik;

        document.addEventListener('keyup', (event) => {
            const keyName = event.key;
            if (keyName == ' ') {
                if (is_running == 0) {
                    tens = "00";
                    seconds = "00";
                    appendTens.innerHTML = tens;
                    appendSeconds.innerHTML = seconds;
                    Interval = setInterval(startTimer, 10);
                    is_running = 1;
                }
                if (is_running == 1 && tens > 0) {
                    clearInterval(Interval);
                    is_running = 0;
                }
            }
        });

        buttonStart.onclick = function () {
            
            clearInterval(Interval);
            Interval = setInterval(startTimer, 10);
        }

        buttonStop.onclick = function () {
            clearInterval(Interval);
        }


        buttonReset.onclick = function () {
            clearInterval(Interval);
            tens = "00";
            seconds = "00";
            appendTens.innerHTML = tens;
            appendSeconds.innerHTML = seconds;
        }



        function startTimer() {
            tens++;

            if (tens <= 9) {
                appendTens.innerHTML = "0" + tens;
            }

            if (tens > 9) {
                appendTens.innerHTML = tens;

            }

            if (tens > 99) {
                console.log("seconds");
                seconds++;
                appendSeconds.innerHTML = "0" + seconds;
                tens = 0;
                appendTens.innerHTML = "0" + 0;
            }

            if (seconds > 9) {
                appendSeconds.innerHTML = seconds;
            }
            
            document.getElementById("wynik").innerHTML= "Twój wynik to: "+seconds+"."+tens;
            @Model.Sec = seconds;
            @Model.Tens = tens;
        }


    }
</script>

<div class="wrapper">
	<h1>Stopwatch</h1>
	<p><span id="seconds">00</span>:<span id="tens">00</span></p>
	<button id="button-start">Start</button>
	<button id="button-stop">Stop</button>
	<button id="button-reset">Reset</button>
    <p id="wynik"></p>
</div>

